8751a8709,8724
> function ItemToMuteId takes item whichItem returns integer
> local integer itemId
> local integer i=1
> if whichItem==null then
> return-2
> endif
> set itemId=GetItemTypeId(whichItem)
> loop
> exitwhen i>Item_Max
> if Item_Mute[i]==itemId then
> return i
> endif
> set i=i+1
> endloop
> return-1
> endfunction
19104a19065,19067
> function CourierFakedItems_IsFlaggedSecondary takes integer indexId returns boolean
> return indexId==indexid_gemoftruesight or indexId==indexid_gemoftruesightcourier
> endfunction
19110a19074,19075
> local integer fakeIndexId=ItemToMuteId(whichItem)
> local boolean foundFake=false
19120a19086,19088
> if indexId==indexid_shivasguardcourier then
> set newIndex=indexid_shivasguard
> endif
19124,19125c19092,19094
< if indexId==indexid_shivasguardcourier then
< set newIndex=indexid_shivasguard
---
> if fakeIndexId==indexid_gemoftruesightcourier then
> set newIndex=indexid_gemoftruesight
> set foundFake=true
19129a19099,19101
> if foundFake then
> set tt_item1=UnitAddItemById(Hero,Item_Mute[newIndex])
> else
19130a19103
> endif
19150a19124,19127
> if fakeIndexId==indexid_gemoftruesight then
> set newIndex=indexid_gemoftruesightcourier
> set foundFake=true
> endif
19153a19131,19133
> if foundFake then
> set tt_item1=UnitAddItemById(Hero,Item_Mute[newIndex])
> else
19154a19135
> endif
19164c19145
< if CourierFakedItems_IsFlagged(ItemToIndex(Item))then
---
> if CourierFakedItems_IsFlagged(ItemToIndex(Item))or CourierFakedItems_IsFlaggedSecondary(ItemToMuteId(Item))then
19457a19439
> if IsDead(GetTriggerUnit())==false then
19459a19442
> endif
